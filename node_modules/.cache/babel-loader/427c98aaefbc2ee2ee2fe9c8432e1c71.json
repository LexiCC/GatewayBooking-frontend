{"ast":null,"code":"var _jsxFileName = \"/Users/xiaogengchi/Desktop/CS/LaiOffer_Project/stayBookingFrontend/src/components/GuestHomePage.js\";\nimport React from \"react\";\nimport { Tabs, message, List, Typography, Button, Form, DatePicker, InputNumber, Card, Carousel, Image, Modal } from \"antd\";\nimport { bookStay, cancelReservation, getReservations, searchStays } from \"../utils\";\nimport { StayDetailInfoButton } from \"../components/HostHomePage\";\nimport { LeftCircleFilled, RightCircleFilled } from \"@ant-design/icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Text\n} = Typography;\nconst {\n  TabPane\n} = Tabs;\n\nclass BookStayButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      modalVisible: false\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        modalVisible: false\n      });\n    };\n\n    this.handleBookStay = () => {\n      this.setState({\n        modalVisible: true\n      });\n    };\n\n    this.handleSubmit = async values => {\n      const {\n        stay\n      } = this.props;\n      this.setState({\n        loading: true\n      });\n\n      try {\n        await bookStay({\n          checkin_date: values.checkin_date.format(\"YYYY-MM-DD\"),\n          checkout_date: values.checkout_date.format(\"YYYY-MM-DD\"),\n          stay: {\n            id: stay.id\n          }\n        });\n        message.success(\"Successfully book stay\");\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n  }\n\n  render() {\n    const {\n      stay\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: this.handleBookStay,\n        shape: \"round\",\n        type: \"primary\",\n        children: \"Book Stay\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        destroyOnClose: true,\n        title: stay.name,\n        visible: this.state.modalVisible,\n        footer: null,\n        onCancel: this.handleCancel,\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          preserve: false,\n          labelCol: {\n            span: 8\n          },\n          wrapperCol: {\n            span: 16\n          },\n          onFinish: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"Checkin Date\",\n            name: \"checkin_date\",\n            rules: [{\n              required: true\n            }],\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"Checkout Date\",\n            name: \"checkout_date\",\n            rules: [{\n              required: true\n            }],\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            wrapperCol: {\n              offset: 8,\n              span: 16\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              loading: this.state.loading,\n              type: \"primary\",\n              htmlType: \"submit\",\n              children: \"Book\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nclass SearchStays extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      loading: false\n    };\n\n    this.search = async query => {\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const resp = await searchStays(query);\n        this.setState({\n          data: resp\n        });\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        onFinish: this.search,\n        layout: \"inline\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Guest Number\",\n          name: \"guest_number\",\n          rules: [{\n            required: true\n          }],\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            min: 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Checkin Date\",\n          name: \"checkin_date\",\n          rules: [{\n            required: true\n          }],\n          children: /*#__PURE__*/_jsxDEV(DatePicker, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Checkout Date\",\n          name: \"checkout_date\",\n          rules: [{\n            required: true\n          }],\n          children: /*#__PURE__*/_jsxDEV(DatePicker, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            loading: this.state.loading,\n            type: \"primary\",\n            htmlType: \"submit\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(List, {\n        style: {\n          marginTop: 20\n        },\n        loading: this.state.loading,\n        grid: {\n          gutter: 16,\n          xs: 1,\n          sm: 3,\n          md: 3,\n          lg: 3,\n          xl: 4,\n          xxl: 4\n        },\n        dataSource: this.state.data,\n        renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            title: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                alignItems: \"center\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(Text, {\n                ellipsis: true,\n                style: {\n                  maxWidth: 150\n                },\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(StayDetailInfoButton, {\n                stay: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 19\n            }, this),\n            extra: /*#__PURE__*/_jsxDEV(BookStayButton, {\n              stay: item\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 24\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Carousel, {\n              dots: false,\n              arrows: true,\n              prevArrow: /*#__PURE__*/_jsxDEV(LeftCircleFilled, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 32\n              }, this),\n              nextArrow: /*#__PURE__*/_jsxDEV(RightCircleFilled, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 32\n              }, this),\n              children: item.images.map((image, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Image, {\n                  src: image.url,\n                  width: \"100%\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 25\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 19\n            }, this)\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nclass CancelReservationButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false\n    };\n\n    this.handleCancelReservation = async () => {\n      const {\n        reservationId,\n        onCancelSuccess\n      } = this.props;\n      this.setState({\n        loading: true\n      });\n\n      try {\n        await cancelReservation(reservationId);\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n\n      onCancelSuccess();\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      loading: this.state.loading,\n      onClick: this.handleCancelReservation,\n      danger: true,\n      shape: \"round\",\n      type: \"primary\",\n      children: \"Cancel Reservation\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass MyReservations extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      data: []\n    };\n\n    this.loadData = async () => {\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const resp = await getReservations();\n        this.setState({\n          data: resp\n        });\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(List, {\n      style: {\n        width: 1000,\n        margin: \"auto\"\n      },\n      loading: this.state.loading,\n      dataSource: this.state.data,\n      renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n        actions: [/*#__PURE__*/_jsxDEV(CancelReservationButton, {\n          reservationId: item.id,\n          onCancelSuccess: () => this.loadData()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 15\n        }, this)],\n        children: /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n          title: /*#__PURE__*/_jsxDEV(Text, {\n            children: item.stay.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 22\n          }, this),\n          description: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              children: [\"Checkin Date: \", item.checkin_date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              children: [\"Checkout Date: \", item.checkout_date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass GuestHomePage extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(Tabs, {\n      defaultActiveKey: \"1\",\n      destroyInactiveTabPane: true,\n      children: [/*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"Search Stays\",\n        children: /*#__PURE__*/_jsxDEV(SearchStays, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this)\n      }, \"1\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"My Reservations\",\n        children: /*#__PURE__*/_jsxDEV(MyReservations, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this)\n      }, \"2\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), \"ane 3\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default GuestHomePage;","map":{"version":3,"sources":["/Users/xiaogengchi/Desktop/CS/LaiOffer_Project/stayBookingFrontend/src/components/GuestHomePage.js"],"names":["React","Tabs","message","List","Typography","Button","Form","DatePicker","InputNumber","Card","Carousel","Image","Modal","bookStay","cancelReservation","getReservations","searchStays","StayDetailInfoButton","LeftCircleFilled","RightCircleFilled","Text","TabPane","BookStayButton","Component","state","loading","modalVisible","handleCancel","setState","handleBookStay","handleSubmit","values","stay","props","checkin_date","format","checkout_date","id","success","error","render","name","span","required","offset","SearchStays","data","search","query","resp","marginTop","gutter","xs","sm","md","lg","xl","xxl","item","display","alignItems","maxWidth","images","map","image","index","url","CancelReservationButton","handleCancelReservation","reservationId","onCancelSuccess","MyReservations","loadData","componentDidMount","width","margin","GuestHomePage"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  Tabs,\n  message,\n  List,\n  Typography,\n  Button,\n  Form,\n  DatePicker,\n  InputNumber,\n  Card,\n  Carousel,\n  Image,\n  Modal,\n} from \"antd\";\nimport {\n  bookStay,\n  cancelReservation,\n  getReservations,\n  searchStays,\n} from \"../utils\";\nimport { StayDetailInfoButton } from \"../components/HostHomePage\";\nimport { LeftCircleFilled, RightCircleFilled } from \"@ant-design/icons\";\n\nconst { Text } = Typography;\nconst { TabPane } = Tabs;\n\nclass BookStayButton extends React.Component {\n  state = {\n    loading: false,\n    modalVisible: false,\n  };\n\n  handleCancel = () => {\n    this.setState({\n      modalVisible: false,\n    });\n  };\n\n  handleBookStay = () => {\n    this.setState({\n      modalVisible: true,\n    });\n  };\n\n  handleSubmit = async (values) => {\n    const { stay } = this.props;\n    this.setState({\n      loading: true,\n    });\n\n    try {\n      await bookStay({\n        checkin_date: values.checkin_date.format(\"YYYY-MM-DD\"),\n        checkout_date: values.checkout_date.format(\"YYYY-MM-DD\"),\n        stay: {\n          id: stay.id,\n        },\n      });\n      message.success(\"Successfully book stay\");\n    } catch (error) {\n      message.error(error.message);\n    } finally {\n      this.setState({\n        loading: false,\n      });\n    }\n  };\n\n  render() {\n    const { stay } = this.props;\n    return (\n      <>\n        <Button onClick={this.handleBookStay} shape=\"round\" type=\"primary\">\n          Book Stay\n        </Button>\n        <Modal\n          destroyOnClose={true}\n          title={stay.name}\n          visible={this.state.modalVisible}\n          footer={null}\n          onCancel={this.handleCancel}\n        >\n          <Form\n            preserve={false}\n            labelCol={{ span: 8 }}\n            wrapperCol={{ span: 16 }}\n            onFinish={this.handleSubmit}\n          >\n            <Form.Item\n              label=\"Checkin Date\"\n              name=\"checkin_date\"\n              rules={[{ required: true }]}\n            >\n              <DatePicker />\n            </Form.Item>\n            <Form.Item\n              label=\"Checkout Date\"\n              name=\"checkout_date\"\n              rules={[{ required: true }]}\n            >\n              <DatePicker />\n            </Form.Item>\n            <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\n              <Button\n                loading={this.state.loading}\n                type=\"primary\"\n                htmlType=\"submit\"\n              >\n                Book\n              </Button>\n            </Form.Item>\n          </Form>\n        </Modal>\n      </>\n    );\n  }\n}\n\nclass SearchStays extends React.Component {\n  state = {\n    data: [],\n    loading: false,\n  };\n\n  search = async (query) => {\n    this.setState({\n      loading: true,\n    });\n\n    try {\n      const resp = await searchStays(query);\n      this.setState({\n        data: resp,\n      });\n    } catch (error) {\n      message.error(error.message);\n    } finally {\n      this.setState({\n        loading: false,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <>\n        <Form onFinish={this.search} layout=\"inline\">\n          <Form.Item\n            label=\"Guest Number\"\n            name=\"guest_number\"\n            rules={[{ required: true }]}\n          >\n            <InputNumber min={1} />\n          </Form.Item>\n          <Form.Item\n            label=\"Checkin Date\"\n            name=\"checkin_date\"\n            rules={[{ required: true }]}\n          >\n            <DatePicker />\n          </Form.Item>\n          <Form.Item\n            label=\"Checkout Date\"\n            name=\"checkout_date\"\n            rules={[{ required: true }]}\n          >\n            <DatePicker />\n          </Form.Item>\n          <Form.Item>\n            <Button\n              loading={this.state.loading}\n              type=\"primary\"\n              htmlType=\"submit\"\n            >\n              Submit\n            </Button>\n          </Form.Item>\n        </Form>\n        <List\n          style={{ marginTop: 20 }}\n          loading={this.state.loading}\n          grid={{\n            gutter: 16,\n            xs: 1,\n            sm: 3,\n            md: 3,\n            lg: 3,\n            xl: 4,\n            xxl: 4,\n          }}\n          dataSource={this.state.data}\n          renderItem={(item) => (\n            <List.Item>\n              <Card\n                key={item.id}\n                title={\n                  <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                    <Text ellipsis={true} style={{ maxWidth: 150 }}>\n                      {item.name}\n                    </Text>\n                    <StayDetailInfoButton stay={item} />\n                  </div>\n                }\n                extra={<BookStayButton stay={item} />}\n              >\n                {\n                  <Carousel\n                    dots={false}\n                    arrows={true}\n                    prevArrow={<LeftCircleFilled />}\n                    nextArrow={<RightCircleFilled />}\n                  >\n                    {item.images.map((image, index) => (\n                      <div key={index}>\n                        <Image src={image.url} width=\"100%\" />\n                      </div>\n                    ))}\n                  </Carousel>\n                }\n              </Card>\n            </List.Item>\n          )}\n        />\n      </>\n    );\n  }\n}\n\nclass CancelReservationButton extends React.Component {\n  state = {\n    loading: false,\n  };\n\n  handleCancelReservation = async () => {\n    const { reservationId, onCancelSuccess } = this.props;\n    this.setState({\n      loading: true,\n    });\n\n    try {\n      await cancelReservation(reservationId);\n    } catch (error) {\n      message.error(error.message);\n    } finally {\n      this.setState({\n        loading: false,\n      });\n    }\n\n    onCancelSuccess();\n  };\n\n  render() {\n    return (\n      <Button\n        loading={this.state.loading}\n        onClick={this.handleCancelReservation}\n        danger={true}\n        shape=\"round\"\n        type=\"primary\"\n      >\n        Cancel Reservation\n      </Button>\n    );\n  }\n}\n\nclass MyReservations extends React.Component {\n  state = {\n    loading: false,\n    data: [],\n  };\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  loadData = async () => {\n    this.setState({\n      loading: true,\n    });\n\n    try {\n      const resp = await getReservations();\n      this.setState({\n        data: resp,\n      });\n    } catch (error) {\n      message.error(error.message);\n    } finally {\n      this.setState({\n        loading: false,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <List\n        style={{ width: 1000, margin: \"auto\" }}\n        loading={this.state.loading}\n        dataSource={this.state.data}\n        renderItem={(item) => (\n          <List.Item\n            actions={[\n              <CancelReservationButton\n                reservationId={item.id}\n                onCancelSuccess={() => this.loadData()}\n              />,\n            ]}\n          >\n            <List.Item.Meta\n              title={<Text>{item.stay.name}</Text>}\n              description={\n                <>\n                  <Text>Checkin Date: {item.checkin_date}</Text>\n                  <br />\n                  <Text>Checkout Date: {item.checkout_date}</Text>\n                </>\n              }\n            />\n          </List.Item>\n        )}\n      />\n    );\n  }\n}\n\nclass GuestHomePage extends React.Component {\n  render() {\n    return (\n      <Tabs defaultActiveKey=\"1\" destroyInactiveTabPane={true}>\n        <TabPane tab=\"Search Stays\" key=\"1\">\n          <SearchStays />\n        </TabPane>\n        <TabPane tab=\"My Reservations\" key=\"2\">\n          <MyReservations />\n        </TabPane>\n        ane 3\n      </Tabs>\n    );\n  }\n}\n\nexport default GuestHomePage;\n"]},"metadata":{},"sourceType":"module"}