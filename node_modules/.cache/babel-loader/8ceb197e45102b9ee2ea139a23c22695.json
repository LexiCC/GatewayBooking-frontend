{"ast":null,"code":"const domain = \"http://localhost:8080\";\nexport const login = (credential, asHost) => {\n  const loginUrl = `${domain}/authenticate/${asHost ? \"host\" : \"guest\"}`;\n  return fetch(loginUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(credential)\n  }).then(response => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to log in\");\n    }\n\n    return response.json();\n  });\n};\nexport const register = (credential, asHost) => {\n  const registerUrl = `${domain}/register/${asHost ? \"host\" : \"guest\"}`;\n  return fetch(registerUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(credential)\n  }).then(response => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to register\");\n    }\n  });\n};\nexport const getReservations = () => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const listReservationsUrl = `${domain}/reservations`;\n  return fetch(listReservationsUrl, {\n    headers: {\n      Authorization: `Bearer ${authToken}`\n    }\n  }).then(response => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to get reservation list\");\n    }\n\n    return response.json();\n  });\n};\nexport const getStaysByHost = () => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const listStaysUrl = `${domain}/stays/`;\n  return fetch(listStaysUrl, {\n    headers: {\n      Authorization: `Bearer ${authToken}`\n    }\n  }).then(response => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to get stay list\");\n    }\n\n    return response.json();\n  });\n};\nexport const searchStays = query => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const searchStaysUrl = new URL(`${domain}/search/`);\n  searchStaysUrl.searchParams.append(\"guest_number\", query.guest_number);\n  searchStaysUrl.searchParams.append(\"checkin_date\", query.checkin_date.format(\"YYYY-MM-DD\"));\n  searchStaysUrl.searchParams.append(\"checkout_date\", query.checkout_date.format(\"YYYY-MM-DD\"));\n  searchStaysUrl.searchParams.append(\"lat\", 37);\n  searchStaysUrl.searchParams.append(\"lon\", -122);\n  return fetch(searchStaysUrl, {\n    headers: {\n      Authorization: `Bearer ${authToken}`\n    }\n  }).then(response => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to search stays\");\n    }\n\n    return response.json();\n  });\n};\nexport const deleteStay = stayId => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const deleteStayUrl = `${domain}/stays/${stayId}`;\n  return fetch(deleteStayUrl, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${authToken}`\n    }\n  }).then(response => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to delete stay\");\n    }\n  });\n};\nexport const bookStay = data => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const bookStayUrl = `${domain}/reservations`;\n  return fetch(bookStayUrl, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${authToken}`,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  }).then(response => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to book reservation\");\n    }\n  });\n};\nexport const cancelReservation = reservationId => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const cancelReservationUrl = `${domain}/reservations/${reservationId}`;\n  return fetch(cancelReservationUrl, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${authToken}`\n    }\n  }).then(response => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to cancel reservation\");\n    }\n  });\n};\nexport const getReservationsByStay = stayId => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const getReservationByStayUrl = `${domain}/stays/reservations/${stayId}`;\n  return fetch(getReservationByStayUrl, {\n    headers: {\n      Authorization: `Bearer ${authToken}`\n    }\n  }).then(response => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to get reservations by stay\");\n    }\n\n    return response.json();\n  });\n};\nexport const uploadStay = data => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const uploadStayUrl = `${domain}/stays`;\n  return fetch(uploadStayUrl, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${authToken}`\n    },\n    body: data\n  }).then(response => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to upload stay\");\n    }\n  });\n};","map":{"version":3,"sources":["/Users/xiaogengchi/Desktop/CS/LaiOffer_Project/stayBookingFrontend/src/utils.js"],"names":["domain","login","credential","asHost","loginUrl","fetch","method","headers","body","JSON","stringify","then","response","status","Error","json","register","registerUrl","getReservations","authToken","localStorage","getItem","listReservationsUrl","Authorization","getStaysByHost","listStaysUrl","searchStays","query","searchStaysUrl","URL","searchParams","append","guest_number","checkin_date","format","checkout_date","deleteStay","stayId","deleteStayUrl","bookStay","data","bookStayUrl","cancelReservation","reservationId","cancelReservationUrl","getReservationsByStay","getReservationByStayUrl","uploadStay","uploadStayUrl"],"mappings":"AAAA,MAAMA,MAAM,GAAG,uBAAf;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,UAAD,EAAaC,MAAb,KAAwB;AAC3C,QAAMC,QAAQ,GAAI,GAAEJ,MAAO,iBAAgBG,MAAM,GAAG,MAAH,GAAY,OAAQ,EAArE;AACA,SAAOE,KAAK,CAACD,QAAD,EAAW;AACrBE,IAAAA,MAAM,EAAE,MADa;AAErBC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFY;AAKrBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,UAAf;AALe,GAAX,CAAL,CAMJS,IANI,CAMEC,QAAD,IAAc;AACpB,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAMC,KAAK,CAAC,gBAAD,CAAX;AACD;;AAED,WAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,GAZM,CAAP;AAaD,CAfM;AAiBP,OAAO,MAAMC,QAAQ,GAAG,CAACd,UAAD,EAAaC,MAAb,KAAwB;AAC9C,QAAMc,WAAW,GAAI,GAAEjB,MAAO,aAAYG,MAAM,GAAG,MAAH,GAAY,OAAQ,EAApE;AACA,SAAOE,KAAK,CAACY,WAAD,EAAc;AACxBX,IAAAA,MAAM,EAAE,MADgB;AAExBC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFe;AAKxBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,UAAf;AALkB,GAAd,CAAL,CAMJS,IANI,CAMEC,QAAD,IAAc;AACpB,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAMC,KAAK,CAAC,kBAAD,CAAX;AACD;AACF,GAVM,CAAP;AAWD,CAbM;AAeP,OAAO,MAAMI,eAAe,GAAG,MAAM;AACnC,QAAMC,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAlB;AACA,QAAMC,mBAAmB,GAAI,GAAEtB,MAAO,eAAtC;AAEA,SAAOK,KAAK,CAACiB,mBAAD,EAAsB;AAChCf,IAAAA,OAAO,EAAE;AACPgB,MAAAA,aAAa,EAAG,UAASJ,SAAU;AAD5B;AADuB,GAAtB,CAAL,CAIJR,IAJI,CAIEC,QAAD,IAAc;AACpB,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAMC,KAAK,CAAC,8BAAD,CAAX;AACD;;AAED,WAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,GAVM,CAAP;AAWD,CAfM;AAiBP,OAAO,MAAMS,cAAc,GAAG,MAAM;AAClC,QAAML,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAlB;AACA,QAAMI,YAAY,GAAI,GAAEzB,MAAO,SAA/B;AAEA,SAAOK,KAAK,CAACoB,YAAD,EAAe;AACzBlB,IAAAA,OAAO,EAAE;AACPgB,MAAAA,aAAa,EAAG,UAASJ,SAAU;AAD5B;AADgB,GAAf,CAAL,CAIJR,IAJI,CAIEC,QAAD,IAAc;AACpB,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAMC,KAAK,CAAC,uBAAD,CAAX;AACD;;AAED,WAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,GAVM,CAAP;AAWD,CAfM;AAiBP,OAAO,MAAMW,WAAW,GAAIC,KAAD,IAAW;AACpC,QAAMR,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAlB;AACA,QAAMO,cAAc,GAAG,IAAIC,GAAJ,CAAS,GAAE7B,MAAO,UAAlB,CAAvB;AACA4B,EAAAA,cAAc,CAACE,YAAf,CAA4BC,MAA5B,CAAmC,cAAnC,EAAmDJ,KAAK,CAACK,YAAzD;AACAJ,EAAAA,cAAc,CAACE,YAAf,CAA4BC,MAA5B,CACE,cADF,EAEEJ,KAAK,CAACM,YAAN,CAAmBC,MAAnB,CAA0B,YAA1B,CAFF;AAIAN,EAAAA,cAAc,CAACE,YAAf,CAA4BC,MAA5B,CACE,eADF,EAEEJ,KAAK,CAACQ,aAAN,CAAoBD,MAApB,CAA2B,YAA3B,CAFF;AAIAN,EAAAA,cAAc,CAACE,YAAf,CAA4BC,MAA5B,CAAmC,KAAnC,EAA0C,EAA1C;AACAH,EAAAA,cAAc,CAACE,YAAf,CAA4BC,MAA5B,CAAmC,KAAnC,EAA0C,CAAC,GAA3C;AAEA,SAAO1B,KAAK,CAACuB,cAAD,EAAiB;AAC3BrB,IAAAA,OAAO,EAAE;AACPgB,MAAAA,aAAa,EAAG,UAASJ,SAAU;AAD5B;AADkB,GAAjB,CAAL,CAIJR,IAJI,CAIEC,QAAD,IAAc;AACpB,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAMC,KAAK,CAAC,sBAAD,CAAX;AACD;;AAED,WAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,GAVM,CAAP;AAWD,CA1BM;AA4BP,OAAO,MAAMqB,UAAU,GAAIC,MAAD,IAAY;AACpC,QAAMlB,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAlB;AACA,QAAMiB,aAAa,GAAI,GAAEtC,MAAO,UAASqC,MAAO,EAAhD;AAEA,SAAOhC,KAAK,CAACiC,aAAD,EAAgB;AAC1BhC,IAAAA,MAAM,EAAE,QADkB;AAE1BC,IAAAA,OAAO,EAAE;AACPgB,MAAAA,aAAa,EAAG,UAASJ,SAAU;AAD5B;AAFiB,GAAhB,CAAL,CAKJR,IALI,CAKEC,QAAD,IAAc;AACpB,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAMC,KAAK,CAAC,qBAAD,CAAX;AACD;AACF,GATM,CAAP;AAUD,CAdM;AAgBP,OAAO,MAAMyB,QAAQ,GAAIC,IAAD,IAAU;AAChC,QAAMrB,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAlB;AACA,QAAMoB,WAAW,GAAI,GAAEzC,MAAO,eAA9B;AAEA,SAAOK,KAAK,CAACoC,WAAD,EAAc;AACxBnC,IAAAA,MAAM,EAAE,MADgB;AAExBC,IAAAA,OAAO,EAAE;AACPgB,MAAAA,aAAa,EAAG,UAASJ,SAAU,EAD5B;AAEP,sBAAgB;AAFT,KAFe;AAMxBX,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe8B,IAAf;AANkB,GAAd,CAAL,CAOJ7B,IAPI,CAOEC,QAAD,IAAc;AACpB,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAMC,KAAK,CAAC,0BAAD,CAAX;AACD;AACF,GAXM,CAAP;AAYD,CAhBM;AAkBP,OAAO,MAAM4B,iBAAiB,GAAIC,aAAD,IAAmB;AAClD,QAAMxB,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAlB;AACA,QAAMuB,oBAAoB,GAAI,GAAE5C,MAAO,iBAAgB2C,aAAc,EAArE;AAEA,SAAOtC,KAAK,CAACuC,oBAAD,EAAuB;AACjCtC,IAAAA,MAAM,EAAE,QADyB;AAEjCC,IAAAA,OAAO,EAAE;AACPgB,MAAAA,aAAa,EAAG,UAASJ,SAAU;AAD5B;AAFwB,GAAvB,CAAL,CAKJR,IALI,CAKEC,QAAD,IAAc;AACpB,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAMC,KAAK,CAAC,4BAAD,CAAX;AACD;AACF,GATM,CAAP;AAUD,CAdM;AAgBP,OAAO,MAAM+B,qBAAqB,GAAIR,MAAD,IAAY;AAC/C,QAAMlB,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAlB;AACA,QAAMyB,uBAAuB,GAAI,GAAE9C,MAAO,uBAAsBqC,MAAO,EAAvE;AAEA,SAAOhC,KAAK,CAACyC,uBAAD,EAA0B;AACpCvC,IAAAA,OAAO,EAAE;AACPgB,MAAAA,aAAa,EAAG,UAASJ,SAAU;AAD5B;AAD2B,GAA1B,CAAL,CAIJR,IAJI,CAIEC,QAAD,IAAc;AACpB,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAMC,KAAK,CAAC,kCAAD,CAAX;AACD;;AAED,WAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,GAVM,CAAP;AAWD,CAfM;AAiBP,OAAO,MAAMgC,UAAU,GAAIP,IAAD,IAAU;AAClC,QAAMrB,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAlB;AACA,QAAM2B,aAAa,GAAI,GAAEhD,MAAO,QAAhC;AAEA,SAAOK,KAAK,CAAC2C,aAAD,EAAgB;AAC1B1C,IAAAA,MAAM,EAAE,MADkB;AAE1BC,IAAAA,OAAO,EAAE;AACPgB,MAAAA,aAAa,EAAG,UAASJ,SAAU;AAD5B,KAFiB;AAK1BX,IAAAA,IAAI,EAAEgC;AALoB,GAAhB,CAAL,CAMJ7B,IANI,CAMEC,QAAD,IAAc;AACpB,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAMC,KAAK,CAAC,qBAAD,CAAX;AACD;AACF,GAVM,CAAP;AAWD,CAfM","sourcesContent":["const domain = \"http://localhost:8080\";\n\nexport const login = (credential, asHost) => {\n  const loginUrl = `${domain}/authenticate/${asHost ? \"host\" : \"guest\"}`;\n  return fetch(loginUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(credential),\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to log in\");\n    }\n\n    return response.json();\n  });\n};\n\nexport const register = (credential, asHost) => {\n  const registerUrl = `${domain}/register/${asHost ? \"host\" : \"guest\"}`;\n  return fetch(registerUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(credential),\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to register\");\n    }\n  });\n};\n\nexport const getReservations = () => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const listReservationsUrl = `${domain}/reservations`;\n\n  return fetch(listReservationsUrl, {\n    headers: {\n      Authorization: `Bearer ${authToken}`,\n    },\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to get reservation list\");\n    }\n\n    return response.json();\n  });\n};\n\nexport const getStaysByHost = () => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const listStaysUrl = `${domain}/stays/`;\n\n  return fetch(listStaysUrl, {\n    headers: {\n      Authorization: `Bearer ${authToken}`,\n    },\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to get stay list\");\n    }\n\n    return response.json();\n  });\n};\n\nexport const searchStays = (query) => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const searchStaysUrl = new URL(`${domain}/search/`);\n  searchStaysUrl.searchParams.append(\"guest_number\", query.guest_number);\n  searchStaysUrl.searchParams.append(\n    \"checkin_date\",\n    query.checkin_date.format(\"YYYY-MM-DD\")\n  );\n  searchStaysUrl.searchParams.append(\n    \"checkout_date\",\n    query.checkout_date.format(\"YYYY-MM-DD\")\n  );\n  searchStaysUrl.searchParams.append(\"lat\", 37);\n  searchStaysUrl.searchParams.append(\"lon\", -122);\n\n  return fetch(searchStaysUrl, {\n    headers: {\n      Authorization: `Bearer ${authToken}`,\n    },\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to search stays\");\n    }\n\n    return response.json();\n  });\n};\n\nexport const deleteStay = (stayId) => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const deleteStayUrl = `${domain}/stays/${stayId}`;\n\n  return fetch(deleteStayUrl, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${authToken}`,\n    },\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to delete stay\");\n    }\n  });\n};\n\nexport const bookStay = (data) => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const bookStayUrl = `${domain}/reservations`;\n\n  return fetch(bookStayUrl, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${authToken}`,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to book reservation\");\n    }\n  });\n};\n\nexport const cancelReservation = (reservationId) => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const cancelReservationUrl = `${domain}/reservations/${reservationId}`;\n\n  return fetch(cancelReservationUrl, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${authToken}`,\n    },\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to cancel reservation\");\n    }\n  });\n};\n\nexport const getReservationsByStay = (stayId) => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const getReservationByStayUrl = `${domain}/stays/reservations/${stayId}`;\n\n  return fetch(getReservationByStayUrl, {\n    headers: {\n      Authorization: `Bearer ${authToken}`,\n    },\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to get reservations by stay\");\n    }\n\n    return response.json();\n  });\n};\n\nexport const uploadStay = (data) => {\n  const authToken = localStorage.getItem(\"authToken\");\n  const uploadStayUrl = `${domain}/stays`;\n\n  return fetch(uploadStayUrl, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${authToken}`,\n    },\n    body: data,\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to upload stay\");\n    }\n  });\n};\n"]},"metadata":{},"sourceType":"module"}