{"ast":null,"code":"var _jsxFileName = \"/Users/xiaogengchi/Desktop/CS/LaiOffer_Project/stayBookingFrontend/src/components/LoginPage.js\";\nimport React from \"react\";\nimport { Form, Button, Input, Space, Checkbox, message } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport { login, register } from \"../utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LoginPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.formRef = /*#__PURE__*/React.createRef();\n    this.state = {\n      asHost: false,\n      loading: false\n    };\n\n    this.onFinish = () => {\n      console.log(\"finish form\");\n    };\n\n    this.handleLogin = async () => {\n      const formInstance = this.formRef.current;\n\n      try {\n        await formInstance.validateFields();\n      } catch (error) {\n        return;\n      }\n\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const {\n          asHost\n        } = this.state;\n        const resp = await login(formInstance.getFieldsValue(true), asHost);\n        this.props.handleLoginSuccess(resp.token, asHost);\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n\n    this.handleRegister = async () => {\n      const formInstance = this.formRef.current;\n\n      try {\n        await formInstance.validateFields();\n      } catch (error) {\n        return;\n      }\n\n      this.setState({\n        loading: true\n      });\n\n      try {\n        await register(formInstance.getFieldsValue(true), this.state.asHost);\n        message.success(\"Register Successfully\");\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n\n    this.handleCheckboxOnChange = e => {\n      this.setState({\n        asHost: e.target.checked\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: 500,\n        margin: \"20px auto\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        ref: this.formRef,\n        onFinish: this.onFinish,\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"username\",\n          rules: [{\n            required: true,\n            message: \"Please input your Username!\"\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            disabled: this.state.loading,\n            prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {\n              className: \"site-form-item-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 23\n            }, this),\n            placeholder: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"password\",\n          rules: [{\n            required: true,\n            message: \"Please input your Password!\"\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input.Password, {\n            disabled: this.state.loading,\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n          disabled: this.state.loading,\n          checked: this.state.asHost,\n          onChange: this.handleCheckboxOnChange,\n          children: \"As Host\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.handleLogin,\n          disabled: this.state.loading,\n          shape: \"round\",\n          type: \"primary\",\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.handleRegister,\n          disabled: this.state.loading,\n          shape: \"round\",\n          type: \"primary\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["/Users/xiaogengchi/Desktop/CS/LaiOffer_Project/stayBookingFrontend/src/components/LoginPage.js"],"names":["React","Form","Button","Input","Space","Checkbox","message","UserOutlined","login","register","LoginPage","Component","formRef","createRef","state","asHost","loading","onFinish","console","log","handleLogin","formInstance","current","validateFields","error","setState","resp","getFieldsValue","props","handleLoginSuccess","token","handleRegister","success","handleCheckboxOnChange","e","target","checked","render","width","margin","required"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Form, Button, Input, Space, Checkbox, message } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport { login, register } from \"../utils\";\n\nclass LoginPage extends React.Component {\n  formRef = React.createRef();\n  state = {\n    asHost: false,\n    loading: false,\n  };\n\n  onFinish = () => {\n    console.log(\"finish form\");\n  };\n\n  handleLogin = async () => {\n    const formInstance = this.formRef.current;\n\n    try {\n      await formInstance.validateFields();\n    } catch (error) {\n      return;\n    }\n\n    this.setState({\n      loading: true,\n    });\n\n    try {\n      const { asHost } = this.state;\n      const resp = await login(formInstance.getFieldsValue(true), asHost);\n      this.props.handleLoginSuccess(resp.token, asHost);\n    } catch (error) {\n      message.error(error.message);\n    } finally {\n      this.setState({\n        loading: false,\n      });\n    }\n  };\n\n  handleRegister = async () => {\n    const formInstance = this.formRef.current;\n\n    try {\n      await formInstance.validateFields();\n    } catch (error) {\n      return;\n    }\n\n    this.setState({\n      loading: true,\n    });\n\n    try {\n      await register(formInstance.getFieldsValue(true), this.state.asHost);\n      message.success(\"Register Successfully\");\n    } catch (error) {\n      message.error(error.message);\n    } finally {\n      this.setState({\n        loading: false,\n      });\n    }\n  };\n\n  handleCheckboxOnChange = (e) => {\n    this.setState({\n      asHost: e.target.checked,\n    });\n  };\n\n  render() {\n    return (\n      <div style={{ width: 500, margin: \"20px auto\" }}>\n        <Form ref={this.formRef} onFinish={this.onFinish}>\n          <Form.Item\n            name=\"username\"\n            rules={[\n              {\n                required: true,\n                message: \"Please input your Username!\",\n              },\n            ]}\n          >\n            <Input\n              disabled={this.state.loading}\n              prefix={<UserOutlined className=\"site-form-item-icon\" />}\n              placeholder=\"Username\"\n            />\n          </Form.Item>\n          <Form.Item\n            name=\"password\"\n            rules={[\n              {\n                required: true,\n                message: \"Please input your Password!\",\n              },\n            ]}\n          >\n            <Input.Password\n              disabled={this.state.loading}\n              placeholder=\"Password\"\n            />\n          </Form.Item>\n        </Form>\n        <Space>\n          <Checkbox\n            disabled={this.state.loading}\n            checked={this.state.asHost}\n            onChange={this.handleCheckboxOnChange}\n          >\n            As Host\n          </Checkbox>\n          <Button\n            onClick={this.handleLogin}\n            disabled={this.state.loading}\n            shape=\"round\"\n            type=\"primary\"\n          >\n            Log in\n          </Button>\n          <Button\n            onClick={this.handleRegister}\n            disabled={this.state.loading}\n            shape=\"round\"\n            type=\"primary\"\n          >\n            Register\n          </Button>\n        </Space>\n      </div>\n    );\n  }\n}\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}